<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LiquidGL WebGL - NaughtyDukÂ©</title>
    <link rel="icon" href="/assets/favicon.ico" />
    <style>
      :root {
        --text-color: #333333;
        --bg-color: #f0f0f0;
        --secondary-text: rgba(0, 0, 0, 0.5);
        scroll-behavior: auto;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Helvetica, Arial, sans-serif;
        background-color: var(--bg-color);
        color: var(--text-color);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        line-height: 1.5;
      }
      .split-layout {
        display: flex;
        width: 100%;
        height: 100svh;
      }
      .left-column,
      .right-column {
        width: 50%;
        height: 100%;
        position: relative;
      }
      .left-column {
        overflow-y: auto;
        /* Hide scrollbars but retain scrollability */
        scrollbar-width: none; /* Firefox */
        -ms-overflow-style: none; /* IE and Edge */
      }

      .left-column::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera */
      }
      .right-column {
        background-color: var(--bg-color);
        display: flex; /* Center login form */
        align-items: center;
        justify-content: center;
      }
      .image-container {
        overflow: clip;
        position: relative;
        z-index: 1;
        transform: translate3d(0, 0, 0);
        height: 100svh;
        background: #ececec;
      }

      @media (max-width: 768px) {
        .split-layout {
          flex-direction: column;
        }
        .left-column,
        .right-column {
          width: 100%;
        }
        .left-column {
          display: none;
        }
        .image-container {
          height: 100svh;
        }
        .menu-anchor {
          bottom: 1rem;
        }
      }

      .image-container img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        will-change: transform;
      }

      /* --- Menu Styles --- */
      .menu-anchor {
        z-index: 9999;
        justify-content: center;
        align-items: center;
        display: flex;
        position: fixed;
        inset: 0;
        width: 50%;
        pointer-events: none;
      }

      .menu-anchor a {
        pointer-events: auto;
      }

      .menu-link-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.75rem;
        text-decoration: none;
      }

      .menu-wrap {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        padding: 1.25rem 1.5rem;
        gap: 0.5rem;
        width: 340px;
        height: 200px;
        border-radius: 1rem;
        position: relative;
        overflow: clip;
        background: rgba(255, 255, 255, 0.1); /* Fallback */
        backdrop-filter: blur(30px) saturate(180%); /* Basic blur for non-WebGL */
        will-change: transform;
      }

      @media (max-width: 768px) {
        .menu-wrap {
          border-radius: 5vw;
        }
      }

      .menu-item-stack {
        display: flex;
        flex-direction: column;
      }

      .menu-logo-wrap,
      .menu-items-wrap,
      .menu-item-text {
        z-index: 3;
        mix-blend-mode: difference;
      }

      .menu-items-wrap {
        display: flex;
        gap: 0.5rem;
        align-items: center;
      }

      .menu-item-text {
        color: #b7b7b7;
        font-weight: 700;
        letter-spacing: -0.04rem;
      }

      .small-text-link {
        font-size: 0.8rem;
        color: #b7b7b7;
        font-weight: 600;
        letter-spacing: -0.02rem;
      }

      .menu-item {
        padding: 0.5rem;
        border-radius: 0.25vw;
        justify-content: center;
        align-items: center;
        width: 2.25rem;
        height: 2.25rem;
        display: flex;
        overflow: clip;
      }

      .menu-item-link {
        display: block;
      }

      .menu-icon {
        width: 24px;
        height: 24px;
        filter: invert(1);
        opacity: 0.8;
        transition: opacity 0.2s ease;
      }

      .menu-item-link:hover .menu-icon {
        opacity: 1;
      }

      .menu-logo-wrap {
        display: flex;
        align-items: center;
      }

      .menu-logo {
        height: 2.25rem;
      }

      .download-wrapper {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .download-link {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none; /* remove underline from link */
      }
      .download-icon {
        width: 0.75rem;
        height: 0.75rem;
      }
      .version-text {
        font-size: 0.75rem;
        color: #b7b7b7;
        letter-spacing: 0.02rem;
        font-weight: 500;
        mix-blend-mode: difference;
      }

      .ripples {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        filter: invert(1);
        opacity: 0.3;
      }

      /* --- Login Form Styles --- */
      .login-card {
        width: auto;
        padding: 2rem 2.25rem 2.5rem;
        background: #ffffff;
        border-radius: 1rem;
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        font-family: inherit;
      }

      .form-logo {
        height: 2.5rem;
        width: auto;
        margin: 0 auto;
      }

      .login-title {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--text-color);
        text-align: center;
        margin-bottom: 0.5rem;
      }

      .login-field {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        margin-bottom: 1rem;
      }

      .login-label {
        font-size: 0.875rem;
        font-weight: 600;
        color: var(--secondary-text);
      }

      .login-input {
        padding: 0.75rem 1rem;
        border: 1px solid #d6d6d6;
        border-radius: 0.5rem;
        font-size: 0.95rem;
        transition: border-color 0.2s ease;
        font-family: inherit;
        background-color: #fafafa;
      }

      .login-input:focus {
        outline: none;
        border-color: #6366f1;
        background-color: #fff;
      }

      .login-button {
        margin-top: 0.5rem;
        padding: 0.75rem 1rem;
        border: none;
        border-radius: 0.5rem;
        font-size: 1rem;
        font-weight: 600;
        color: #ffffff;
        background: linear-gradient(135deg, #6366f1 0%, #3b82f6 100%);
        cursor: pointer;
        transition: opacity 0.2s ease;
        width: 100%;
      }

      .login-button:hover {
        opacity: 0.9;
      }

      .login-footer {
        font-size: 0.75rem;
        text-align: center;
        color: var(--secondary-text);
      }

      .login-link {
        color: #6366f1;
        text-decoration: none;
      }

      .login-link:hover {
        text-decoration: underline;
      }

      /* --- Credit Card Elements --- */
      .card-top {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
      }

      .card-chip {
        width: 44px;
        height: auto;
        opacity: 0.8;
      }

      .card-brand {
        width: 56px;
        height: auto;
        filter: grayscale(1) invert(1);
      }

      .card-number {
        font-size: 1.2rem 19.2px;
        letter-spacing: 0.33rem;
        font-weight: 600;
        color: #ffffff;
        width: 100%;
        text-align: left;
      }

      .card-footer {
        display: flex;
        justify-content: flex-start;
        gap: 3rem;
        width: 100%;
        font-size: 0.75rem;
        color: #ffffff;
      }

      .card-footer .label {
        text-transform: uppercase;
        opacity: 0.6;
        font-weight: 500;
        letter-spacing: 0.05rem;
        font-size: 0.65rem;
      }

      .card-holder,
      .card-expiry {
        display: flex;
        flex-direction: column;
        gap: 0.05rem;
      }

      .value {
        font-size: 0.75rem;
        font-weight: 600;
        letter-spacing: 0.02rem;
      }

      /* Ensure all credit card content renders above the WebGL canvas */
      .credit-card * {
        position: relative;
        z-index: 3;
        mix-blend-mode: difference;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lil-gui@0.19.1/dist/lil-gui.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.42/dist/lenis.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery.ripples@0.6.3/dist/jquery.ripples.min.js"></script>
  </head>
  <body>
    <div class="ripples"></div>
    <div class="split-layout">
      <div id="left-col" class="left-column">
        <div class="main-content">
          <div class="image-container">
            <img
              src="/assets/liquid-bkg-_0000_Comp-33.webp"
              alt="Abstract colorful wallpaper"
            />
          </div>

          <div class="image-container">
            <img
              src="/assets/liquid-bkg-_0001_Comp-183.webp"
              alt="Abstract colorful wallpaper"
            />
          </div>

          <div class="image-container">
            <img
              src="/assets/liquid-bkg-_0002_Comp-163.webp"
              alt="Abstract colorful wallpaper"
            />
          </div>

          <div class="image-container">
            <img
              src="/assets/liquid-bkg-_0003_Comp-151.webp"
              alt="Abstract colorful wallpaper"
            />
          </div>

          <div class="image-container">
            <img
              src="/assets/liquid-bkg-_0004_Comp-13.webp"
              alt="Abstract colorful wallpaper"
            />
          </div>
        </div>

        <!-- The menu element that will have the glass effect applied -->
        <div class="menu-anchor">
          <a
            href="https://github.com/naughtyduk/liquidGL"
            style="text-decoration: none"
            target="_blank"
          >
            <div class="menu-wrap credit-card">
              <div class="card-top">
                <img src="/assets/card-chip.svg" alt="Chip" class="card-chip" />
                <img
                  src="https://logo.clearbit.com/visa.com"
                  alt="Visa"
                  class="card-brand"
                />
              </div>
              <div class="card-number">**** **** **** 5482</div>
              <div class="card-footer">
                <div class="card-holder">
                  <span class="label">Card Holder</span>
                  <span class="value">NaughtyDukÂ© LTD</span>
                </div>
                <div class="card-expiry">
                  <span class="label">Expires</span>
                  <span class="value">12/28</span>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>
      <div class="right-column">
        <!-- Login Form -->
        <div class="login-card">
          <img
            src="https://cdn.prod.website-files.com/683cfe5728992d2318dfecd3/6843df24213921eaac90bcda_67a3d1a10eb7305c70724387_logo.svg"
            loading="lazy"
            alt="NaughtyDukÂ©"
            class="form-logo"
          />
          <h2 class="login-title">LiquidGL Bank</h2>
          <form class="login-form" onsubmit="return false">
            <div class="login-field">
              <label for="email" class="login-label">Email</label>
              <input
                type="email"
                id="email"
                name="email"
                placeholder="you@example.com"
                class="login-input"
                autocomplete="email"
                required
              />
            </div>
            <div class="login-field">
              <label for="password" class="login-label">Password</label>
              <input
                type="password"
                id="password"
                name="password"
                placeholder="â¢â¢â¢â¢â¢â¢â¢â¢"
                class="login-input"
                autocomplete="current-password"
                required
              />
            </div>
            <button type="submit" class="login-button">Continue</button>
          </form>
          <p class="login-footer">
            By continuing you agree to our
            <a href="#" class="login-link">Terms</a> &amp;
            <a href="#" class="login-link">Privacy</a>
          </p>
        </div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="/scripts/html2canvas.js"></script>
    <script src="/scripts/liquidGL.js"></script>
    <script>
      let glassEffect; // Declare in a higher scope to be accessible across event listeners

      document.addEventListener("DOMContentLoaded", () => {
        initializeLiquidGL(); // Call immediately on DOM ready

        // Ripples
        $(".ripples").each(function () {
          const $this = $(this);
          $this.ripples({
            resolution: 512,
            dropRadius: 20,
            perturbance: 0.04,
            interactive: true,
          });
        });

        // A function to initialize the glass effect and its controls
        function initializeLiquidGL() {
          let gui, glassFolder;
          // Initialize the Liquid Glass effect on our menu
          glassEffect = LiquidGL({
            snapshot: ".main-content",
            target: ".menu-wrap",
            refraction: 0,
            bevelDepth: 0.1,
            bevelWidth: 0.17,
            frost: 2,
            shadow: true,
            specular: true,
            reveal: "fade",
            on: {
              init(instance) {
                // Setup lil-gui controls only after LiquidGL is fully initialised
                gui = new lil.GUI();
                glassFolder = gui.addFolder("LiquidGL Effect");

                glassFolder
                  .add(instance.options, "refraction", 0, 0.1, 0.001)
                  .name("Refraction");
                glassFolder
                  .add(instance.options, "bevelDepth", 0, 0.2, 0.001)
                  .name("Bevel Depth");
                glassFolder
                  .add(instance.options, "bevelWidth", 0, 0.5, 0.001)
                  .name("Bevel Width");
                glassFolder
                  .add(instance.options, "frost", 0, 10, 0.1)
                  .name("Frost");
                glassFolder.add(instance.options, "specular").name("Specular");
                glassFolder
                  .add(instance.options, "shadow")
                  .name("Enable Shadow")
                  .onChange((value) => {
                    instance.setShadow(value);
                  });
                glassFolder.add(instance.options, "reveal").name("reveal");
                glassFolder.close();
              },
            },
          });
        }

        window.addEventListener("load", function () {
          // Lenis & GSAP ScrollTrigger integration
          const lenis = new Lenis({
            wrapper: document.querySelector("#left-col"),
          });

          // Forward scroll events from the right column to Lenis
          const rightColumn = document.querySelector(".right-column");
          if (rightColumn) {
            rightColumn.addEventListener(
              "wheel",
              (e) => {
                lenis.onWheel(e);
              },
              { passive: false }
            );
          }

          lenis.on("scroll", ScrollTrigger.update);

          gsap.ticker.add((time) => {
            lenis.raf(time * 1000);
            if (glassEffect) {
              // The snapshot target (.main-content) moves with the scroll,
              // so we no longer need to manually adjust scrollOffset.
              glassEffect.render(); // Render in sync with Lenis
            }
          });

          gsap.ticker.lagSmoothing(0);
        });
      });
    </script>
  </body>
</html>
